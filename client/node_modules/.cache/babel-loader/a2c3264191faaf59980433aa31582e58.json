{"ast":null,"code":"import _toConsumableArray from \"/Users/keenanheller/Desktop/bootcamp-homeworks/sportsbook/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"/Users/keenanheller/Desktop/bootcamp-homeworks/sportsbook/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/keenanheller/Desktop/bootcamp-homeworks/sportsbook/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/keenanheller/Desktop/bootcamp-homeworks/sportsbook/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/keenanheller/Desktop/bootcamp-homeworks/sportsbook/client/src/components/RenderBetSlips.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport '../styles/BetSlip.css';\nimport API from '../utils/API';\nimport BetSlip from './BetSlip';\n\nvar RenderBetSlips = function RenderBetSlips(props) {\n  _s();\n\n  // const [toLose, setToLose] = useState(undefined);\n  // const [toWin, setToWin] = useState();\n  var newSlips = props.data;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      slipList = _useState2[0],\n      setSlipList = _useState2[1];\n\n  var handleDelete = function handleDelete(e) {\n    console.log(e);\n    console.log(e.target.id);\n    console.log(slipList);\n    var newList = slipList.filter(function (slip, id) {\n      return id != e.target.id;\n    });\n    console.log(newList);\n    setSlipList(newList);\n    newSlips = {};\n  };\n\n  var updateSlip = function updateSlip(id, attributes) {\n    var index = slipList.findIndex(function (x) {\n      return x.id == id;\n    });\n    var updateList = slipList.slice();\n    console.log(index);\n\n    if (index == -1) {} else {// setSlipList([...])\n    }\n  };\n\n  var handleChange = function handleChange(e, data) {\n    console.log(data);\n    console.log(e);\n    console.log(data.slipData.odds.toString()[0]);\n\n    switch (data.slipData.odds.toString()[0]) {\n      case '-':\n        console.log(data.slipData.odds);\n        var tempCalc = Math.abs(e.target.value * data.slipData.odds * .01);\n        console.log(tempCalc);\n        var finalCalc = tempCalc - e.target.value;\n        setToLose(e.target.value);\n        console.log((e - finalCalc).toFixed(2));\n        setToWin((e.target.value - finalCalc).toFixed(2));\n        var index = slipList.findIndex(function (x) {\n          return x.id == id;\n        });\n        var slice = slipList.slice(0, index);\n        console.log('slice', slice);\n        break;\n\n      default:\n        setToLose(e);\n        console.log((e * data.slipData.odds * .01).toFixed(2));\n        setToWin((e * data.slipData.odds * .01).toFixed(2));\n        break;\n    }\n\n    ;\n  };\n\n  var handleSubmit = function handleSubmit(event) {\n    event.preventDefault();\n    event.persist();\n    console.log(slipList);\n    var userData = JSON.parse(localStorage.getItem('user'));\n    var userId = userData._id;\n    var gameKey = props.data.data.key;\n    var betType = props.data.slipData.type;\n    var team = props.data.slipData.team;\n    var odds = props.data.slipData.odds;\n    var outcome = null;\n    var payout = null;\n    var toLose = null;\n    var toWin = null;\n    var line = null;\n    var status = 'LIVE'; // function to post slip data based on slip type\n\n    var slipData = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.t0 = betType;\n                _context.next = _context.t0 === 'MONEYLINE' ? 3 : _context.t0 === 'SPREAD' ? 6 : _context.t0 === 'TOTALS-OVER' ? 10 : _context.t0 === 'TOTALS-UNDER' ? 14 : 18;\n                break;\n\n              case 3:\n                _context.next = 5;\n                return API.submitBetSlip({\n                  userId,\n                  gameKey,\n                  betType,\n                  team,\n                  line,\n                  odds,\n                  toLose,\n                  toWin,\n                  status,\n                  outcome,\n                  payout\n                }).then(function (res) {\n                  console.log(res);\n                }).catch(function (err) {\n                  console.log(err);\n                });\n\n              case 5:\n                return _context.abrupt(\"break\", 20);\n\n              case 6:\n                line = props.data.slipData.line;\n                _context.next = 9;\n                return API.submitBetSlip({\n                  userId,\n                  gameKey,\n                  betType,\n                  team,\n                  line,\n                  odds,\n                  toLose,\n                  toWin,\n                  status,\n                  outcome,\n                  payout\n                }).then(function (res) {\n                  console.log(res);\n                }).catch(function (err) {\n                  console.log(err);\n                });\n\n              case 9:\n                return _context.abrupt(\"break\", 20);\n\n              case 10:\n                line = props.data.slipData.line;\n                _context.next = 13;\n                return API.submitBetSlip({\n                  userId,\n                  gameKey,\n                  betType,\n                  team,\n                  line,\n                  odds,\n                  toLose,\n                  toWin,\n                  status,\n                  outcome,\n                  payout\n                }).then(function (res) {\n                  console.log(res);\n                }).catch(function (err) {\n                  console.log(err);\n                });\n\n              case 13:\n                return _context.abrupt(\"break\", 20);\n\n              case 14:\n                line = props.data.slipData.line;\n                _context.next = 17;\n                return API.submitBetSlip({\n                  userId,\n                  gameKey,\n                  betType,\n                  team,\n                  line,\n                  odds,\n                  toLose,\n                  toWin,\n                  status,\n                  outcome,\n                  payout\n                }).then(function (res) {\n                  console.log(res);\n                }).catch(function (err) {\n                  console.log(err);\n                });\n\n              case 17:\n                return _context.abrupt(\"break\", 20);\n\n              case 18:\n                console.log('none selected');\n                return _context.abrupt(\"break\", 20);\n\n              case 20:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function slipData() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    slipData();\n  };\n\n  useEffect(function () {\n    // setSlips(slips);\n    // const slips = props.data;\n    // const [slipList, setSlipList] = useState();\n    console.log('mounted');\n    console.log(newSlips);\n\n    if (newSlips === undefined || newSlips === {} || newSlips === null) {} else {\n      setSlipList(function (slipList) {\n        return [].concat(_toConsumableArray(slipList), [newSlips]);\n      });\n      console.log(\"added\");\n    }\n\n    console.log(slipList); // setSlips(slips)\n  }, [newSlips]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"slip\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"slip-title\",\n      children: \"BET SLIP\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }, _this), slipList === undefined || slipList.length === 0 ? '' : slipList.map(function (slip, i) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(BetSlip, {\n          data: slip,\n          id: i,\n          onRemove: handleDelete,\n          onSubmit: handleSubmit,\n          onChange: handleChange,\n          onUpdate: updateSlip\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 15\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 13\n      }, _this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 145,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(RenderBetSlips, \"I7suFpasdNjqVsCeepCoKXFqXnU=\");\n\n_c = RenderBetSlips;\nexport default RenderBetSlips; // take the value from the slip, set it to the array here, then re render the whole page using useffect dependency\n\nvar _c;\n\n$RefreshReg$(_c, \"RenderBetSlips\");","map":{"version":3,"sources":["/Users/keenanheller/Desktop/bootcamp-homeworks/sportsbook/client/src/components/RenderBetSlips.js"],"names":["React","useEffect","useState","API","BetSlip","RenderBetSlips","props","newSlips","data","slipList","setSlipList","handleDelete","e","console","log","target","id","newList","filter","slip","updateSlip","attributes","index","findIndex","x","updateList","slice","handleChange","slipData","odds","toString","tempCalc","Math","abs","value","finalCalc","setToLose","toFixed","setToWin","handleSubmit","event","preventDefault","persist","userData","JSON","parse","localStorage","getItem","userId","_id","gameKey","key","betType","type","team","outcome","payout","toLose","toWin","line","status","submitBetSlip","then","res","catch","err","undefined","length","map","i"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport '../styles/BetSlip.css';\nimport API from '../utils/API';\nimport BetSlip from './BetSlip';\n\nconst RenderBetSlips = (props) => {\n  // const [toLose, setToLose] = useState(undefined);\n  // const [toWin, setToWin] = useState();\n  let newSlips = props.data;\n  const [slipList, setSlipList] = useState([]);\n\n  const handleDelete = (e) => {\n    console.log(e);\n    console.log(e.target.id)\n    console.log(slipList)\n    let newList = slipList.filter((slip, id) => id != e.target.id);\n    console.log(newList)\n    setSlipList(newList);\n    newSlips = {};\n  }\n\n  const updateSlip = (id, attributes) => {\n    let index = slipList.findIndex(x => x.id == id);\n    let updateList = slipList.slice()\n    console.log(index);\n    if (index == -1) {\n\n    } else {\n      // setSlipList([...])\n    }\n  }\n\n  const handleChange = (e, data) => {\n    console.log(data);\n    console.log(e);\n    console.log(data.slipData.odds.toString()[0]);\n    switch (data.slipData.odds.toString()[0]) {\n      case '-':\n        console.log(data.slipData.odds)\n        let tempCalc = Math.abs(e.target.value * data.slipData.odds * .01);\n        console.log(tempCalc)\n        let finalCalc = tempCalc - e.target.value;\n        setToLose(e.target.value)\n        console.log((e - finalCalc).toFixed(2))\n        setToWin((e.target.value - finalCalc).toFixed(2));\n        let index = slipList.findIndex(x => x.id == id);\n        let slice = slipList.slice(0, index);\n        console.log('slice', slice)\n        break;\n      default:\n        setToLose(e);\n        console.log((e * data.slipData.odds * .01).toFixed(2))\n        setToWin((e * data.slipData.odds * .01).toFixed(2));\n        break;\n    };\n  };\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    event.persist();\n    console.log(slipList);\n    const userData = JSON.parse(localStorage.getItem('user'));\n    const userId = userData._id;\n    const gameKey = props.data.data.key;\n    const betType = props.data.slipData.type;\n    const team = props.data.slipData.team;\n    const odds = props.data.slipData.odds;\n    const outcome = null;\n    const payout = null;\n    const toLose = null;\n    const toWin = null;\n    let line = null;\n    const status = 'LIVE';\n\n    // function to post slip data based on slip type\n    const slipData = async () => {\n      switch (betType) {\n        case 'MONEYLINE':\n          await API.submitBetSlip({userId, gameKey, betType, team, line, odds, toLose, toWin, status, outcome, payout})\n            .then((res) => {\n              console.log(res);\n            })\n            .catch(err => {\n              console.log(err);\n            });\n          break;\n        case 'SPREAD':\n          line = props.data.slipData.line;\n          await API.submitBetSlip({userId, gameKey, betType, team, line, odds, toLose, toWin, status, outcome, payout})\n            .then((res) => {\n              console.log(res);\n            })\n            .catch(err => {\n              console.log(err);\n            });\n          break;\n        case 'TOTALS-OVER':\n          line = props.data.slipData.line;\n          await API.submitBetSlip({userId, gameKey, betType, team, line, odds, toLose, toWin, status, outcome, payout})\n            .then((res) => {\n              console.log(res);\n            })\n            .catch(err => {\n              console.log(err);\n            });\n          break;\n        case 'TOTALS-UNDER':\n          line = props.data.slipData.line;\n          await API.submitBetSlip({userId, gameKey, betType, team, line, odds, toLose, toWin, status, outcome, payout})\n            .then((res) => {\n              console.log(res);\n            })\n            .catch(err => {\n              console.log(err);\n            });\n          break;\n        default:\n          console.log('none selected');\n          break;\n      }\n    };\n\n    slipData();\n  };\n\n  useEffect(() => {\n    // setSlips(slips);\n    // const slips = props.data;\n    // const [slipList, setSlipList] = useState();\n    console.log('mounted')\n    console.log(newSlips)\n    if (newSlips === undefined || newSlips === {} || newSlips === null) {\n\n    } else {\n      setSlipList(slipList => [...slipList, newSlips])\n      console.log(\"added\")\n      \n    }\n    console.log(slipList)\n    // setSlips(slips)\n\n  }, [newSlips]);\n\n  return (\n    <div className='slip'>\n      <div className='slip-title'>BET SLIP</div>\n      {(slipList === undefined || slipList.length === 0) ? '' :\n        slipList.map((slip, i) => {\n          return (\n            <div>\n              <BetSlip data={slip} id={i} onRemove={handleDelete} onSubmit={handleSubmit} onChange={handleChange} onUpdate={updateSlip}/>\n            </div>\n          )\n        })\n      }\n    </div>\n  )\n};\n\nexport default RenderBetSlips;\n\n// take the value from the slip, set it to the array here, then re render the whole page using useffect dependency"]},"metadata":{},"sourceType":"module"}